# 软件架构(Software Architecture)简介
* * *

# 架构图的基本概念

1. 架构：架构就是对系统中的实体以及实体之间的关系所进行的抽象描述，是一系列的决策。架构是结构和愿景。系统架构是概念的体现，是对物/信息的功能与形式元素之间的对应情况所做的分配，是对元素之间的关系以及元素同周边环境之间的关系所做的定义。

2. 架构图：系统架构图是为了抽象的表示软件系统的整体轮廓和各个组件之间的相互关系和约束边界，以及软件系统的物理部署和软件系统的演进方向的整体视图。

3. 架构图作用：解决沟通障碍、达成共识、减少歧义。

# 软件架构的所处阶段

软件生命周期的几个阶段：
* 需求分析(Requirement analysis)
* 设计(Design)
* 开发(Development)
* 测试(Testing)
* 验收(Acceptance)
* 部署(Deployment)
* 维护和更新(Maintenance & Update)

软件架构设计属于设计(Design)阶段的工作。设计的内容有：
1. 架构模式(Architectural patterns)
2. 消息机制(Messaging mechanisms)
3. 品质属性(Quality Attributes)
4. API & Interface

而在开发(Development)阶段的前期会涉及这些工作：
1. 编码范例(Coding paradigms)
2. 设计模式(Design patterns)
3. 工具(Tooling)
4. 自动化(Automation)

因此，设计输出是开发阶段的输入。架构是开发阶段的输入。

# 架构模式与设计模式的对比

软件架构是如何组织和组装软件系统的定义组件。他们是如何相互沟通的。以及整个系统所受的约束。因此软件架构设计的主要工作有：

1. 架构模式：软件系统的定义组件是如何组织和组装的。
2. 消息和API：它们如何相互通信。
3. 品质属性：整个系统所受的约束。

架构模式(Architectural patterns)是系统的总体结构。架构模式定义了组件的粒度。粒度就是组件的大小。了解架构模式将有助于我们在开发阶段做出正确的决策。而技术上的重要决策由设计模式承担。

架构（架构模式）和设计模式之间的区别是什么？
* 架构模式
  1. 高层次、通用范围。
  2. 如何组织和组装部件。
* 设计模式
  1. 低层次范围。
  2. 如何构建组件。

# 为什么要进行软件架构设计

软件架构设计是为了：
* 构建软件架构的目标是创建一个系统，以最简单的方式、最有效的方式解决复杂的问题。
* 设计软件架构是指安排系统的组件，使其最适合系统所需的质量属性。

软件架构设计关注的是品质属性(Quality Attributes)：
* 性能(Performance)          - 在旋转的“加载”图标消失之前，用户需要等待多长时间？
* 可用性(Availability)       - 系统运行的时间百分比是多少？
* 易用性(Usability)          - 用户能否轻松了解系统的界面？
* 可修改性(Modifiability)    - 如果开发人员希望向系统添加功能，那么这容易吗？
* 互操作性(Interoperability) - 系统是否与其他系统配合良好？
* 保护措施(Security)         - 系统周围是否有安全堡垒？
* 可移植性(Portability)      - 系统能否在多种不同的平台上运行（即Windows、Mac和Linux）？
* 可扩展性(Scalability)      - 如果快速地划分用户群，系统能否轻松扩展以满足新流量？
* 可部署性(Deployability)    - 将新功能投入生产是否容易？
* 安全性(Safety)             - 如果软件控制物理事物，它会对真实的人造成危害吗？

你不可能拥有一切，将品质属性与你的系统相匹配。我们更多地关注：
* Performance
* Availability
* Usability
* Security

那重点是什么呢？
1. 架构支持质量属性。
2. 架构支持利益相关者之间的沟通。
3. 架构侧重于组装，而不是组件的创建。
4. 架构限制了设计选择，使其它领域的创造力得以发挥。

什么是品质(Quality)，什么是功能(Functionality)？
* 直觉上
  + 功能是产品所能做的事情。
  + 品质就是它做得有多好。
* 最重要的品质是：
  + 可用性(Availability)
  + 互操作性(Interoperability)
  + 可修改性(Modifiability)
  + 性能(Performance)
  + 保护措施(Security)
  + 可测试性(Testability)
  + 易用性(Usability)
* 功能性是指系统完成预期工作的能力。
* 功能性与架构有着奇特的的关系：
  + 功能不决定架构；给定一组必需的功能，可以创建多种架构以满足这些功能。
  + 功能和品质属性是正交的。

品质属性注意事项：
* 如果功能要求为“当用户按下绿色按钮时，将显示选项对话框”：
  + 性能QA注释可能描述对话框出现的速度；
  + 可用性QA注释可能描述此功能失效的频率以及修复的速度；
  + 易用性QA注释可能会描述学习此功能有多容易。
* 先前关于QA的讨论存在三个问题：
  + 为属性提供的定义不可测试。说一个系统是“可修改的”是毫无意义的。
  + 无休止的时间浪费在争论一个问题属于哪一种品质上。
  + 每个属性团体都开发了自己的词汇表。
* 前两个问题（不稳定的定义和重叠关注点）的解决方案是使用品质属性场景作为描述品质属性的手段。
* 第三个问题（专业词汇表）的解决方案是对每个QA进行讨论，集中讨论其潜在的关注点，以说明属性团体的基本概念。

品质和功能性的正式定义（来自ISO 9126）
* 品质   —— “当在规定条件下使用时，产品满足规定和暗示需求的程度。”
* 功能性 —— “当软件在特定条件下使用时，软件产品提供满足规定和隐含需求的功能的能力。” 

# 常见架构模式

常见架构模式有：
1. Level 1 : Monolithic , Service-based , Distributed
2. Level 2 : Layered , Microservices , Event-Driven


